<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Interactive Election Map</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Live Election Results</h1>
      <div id="last-updated" class="muted" aria-live="polite">Last updated: —</div>
    </header>

    <!-- Top: Party banner + Popular vote + Seat Row -->
    <section class="top-widgets">
      <div id="popular-vote" class="card pv-card">
        <!-- Party banner -->
        <div class="party-banner" aria-hidden="true">
          <div class="pb-left">
            <img src="NDP logo.png" alt="" class="pb-logo" />
            <span class="pb-acronym">NDP</span>
          </div>
          <div class="pb-right">
            <span class="pb-acronym">ULP</span>
            <img src="ULP logo.png" alt="" class="pb-logo" />
          </div>
        </div>

        <div class="pv-header">
          <strong>Popular Vote</strong>
          <div class="pv-meta">
            <small id="pv-total" class="muted">0 votes</small>
          </div>
        </div>

        <div class="pv-wrap">
          <!-- 50% marker above the bar ONLY -->
          <div class="pv-50vline" aria-hidden="true"></div>
          <div class="pv-50caret" aria-hidden="true">▼</div>
          <div class="pv-50label-top">50%</div>

          <div class="pv-bar is-loading" id="pv-bar" aria-label="Popular vote stacked bar">
            <!-- segments injected by JS -->
          </div>
        </div>

        <!-- Seat count row (same width as pv-bar) -->
        <div class="seats-wrap">
          <div id="seats-row" class="seats-row is-loading" aria-label="Seat count">
            <!-- 15 squares injected by JS -->
          </div>
          <div id="seat-summary" class="muted seat-summary">0 / 15 decided</div>
        </div>

        <!-- Seat totals per party -->
        <div class="seat-counts" aria-label="Seat totals by party">
          <div class="seat-count ndp">
            <div class="sc-title">
              <span class="sc-dot ndp-dot" aria-hidden="true"></span> NDP
            </div>
            <div class="sc-line">
              <span>Declared:</span> <strong id="sc-ndp-declared">0</strong>
              <span class="dot-sep">•</span>
              <span>Leading:</span> <strong id="sc-ndp-leading">0</strong>
            </div>
          </div>
          <div class="seat-count ulp">
            <div class="sc-title">
              <span class="sc-dot ulp-dot" aria-hidden="true"></span> ULP
            </div>
            <div class="sc-line">
              <span>Declared:</span> <strong id="sc-ulp-declared">0</strong>
              <span class="dot-sep">•</span>
              <span>Leading:</span> <strong id="sc-ulp-leading">0</strong>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Map + Right column -->
    <div class="layout">
      <div id="map-area" class="card">
        <div id="svg-wrapper" aria-label="Constituency map">
          <!-- map.svg injected by script.js -->
        </div>
      </div>

      <aside class="right">
        <div class="card">
          <label>Legend</label>

          <!-- Legend matrix: Party name | Declared | Leading -->
          <div class="legend-matrix">
            <div class="lm-blank"></div>
            <div class="lm-head lm-declared">Declared</div>
            <div class="lm-head lm-leading">Leading</div>

            <div class="lm-row">
              <div class="lm-name">Unity Labour Party</div>
              <div class="lm-swatch ulp-declared" title="ULP Declared"></div>
              <div class="lm-swatch ulp-leading" title="ULP Leading"></div>
            </div>

            <div class="lm-row">
              <div class="lm-name">New Democratic Party</div>
              <div class="lm-swatch ndp-declared" title="NDP Declared"></div>
              <div class="lm-swatch ndp-leading" title="NDP Leading"></div>
            </div>
          </div>
        </div>

        <!-- Swing infobox -->
        <div class="card swing-info">
          <div class="swing-title">About Swing</div>
          <div class="swing-text">
            <strong>Swing</strong> shows how vote share has changed compared with the
            <em>same polling divisions</em> that have reported so far (vs 2020). As more divisions report,
            the swing recalculates using only those areas.
          </div>
        </div>
      </aside>
    </div>

    <!-- Tooltip -->
    <div id="tooltip" class="tooltip" role="dialog" aria-modal="false" style="display:none"></div>

    <!-- Reconnect banner -->
    <div id="reconnect" class="reconnect" role="status" aria-live="polite" hidden>
      Trying to reconnect to live results…
    </div>

    <footer>
      Live election updates: hover or focus a district to view candidates and results. Tap once to pin on mobile; tap outside to close.
    </footer>
  </div>

  <script src="script.js"></script>
</body>
</html>
