:root{
  --bg:#fafafa;
  --panel:#fff;
  --muted:#777;
}

body{font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;background:var(--bg);margin:0;color:#111}
.wrap{max-width:1100px;margin:28px auto;padding:20px}
header{display:flex;gap:16px;align-items:center;justify-content:space-between}
h1{font-size:20px;margin:0}

.card{background:var(--panel);border-radius:12px;box-shadow:0 6px 20px rgba(15,15,20,0.06);padding:12px}
.layout{display:grid;grid-template-columns:1fr 420px;gap:16px;margin-top:18px}

#map-area{background:linear-gradient(180deg,#fff,#fbfdff);min-height:560px;border-radius:10px;padding:8px;display:flex;align-items:center;justify-content:center}
#svg-wrapper{width:100%;height:100%;overflow:hidden;display:flex;justify-content:center}
#svg-wrapper svg{width:67%;height:auto;display:block}

.muted{margin-top:6px;font-size:13px;color:var(--muted)}

/* Tooltip */
.tooltip{
  position:fixed;
  pointer-events:none;
  background:#fff;
  border-radius:8px;
  padding:10px;
  border:1px solid rgba(0,0,0,0.08);
  box-shadow:0 6px 18px rgba(11,13,20,0.08);
  font-size:13px;
  width:380px;
}
.district-name{font-weight:600;margin-bottom:6px}

/* 5-column tooltip table */
.tt-header, .tt-row{
  display:grid;
  grid-template-columns:88px 1fr 62px 62px 66px;
  align-items:center;
  gap:8px;
}
.tt-header{
  font-size:12px;color:var(--muted);
  padding-bottom:4px;border-bottom:1px solid rgba(0,0,0,0.06);margin-bottom:4px;
}
.tt-row{padding:4px 0}
.tt-col{min-width:0}
.party-cell{display:inline-flex;align-items:center;gap:6px;white-space:nowrap}
.party-chip{width:12px;height:12px;border-radius:3px;flex-shrink:0}
.candidate-cell .candidate-name{font-weight:600;font-size:13px;line-height:1}
.votes-cell, .share-cell, .swing-cell{text-align:right;font-size:13px}
.votes-cell, .share-cell{color:#000}
.swing-cell{font-weight:700}
.swing-pos{color:#1a7f37}
.swing-neg{color:#d03a3a}
.swing-zero{color:var(--muted)}
.declared-icon{width:16px;height:auto;margin-left:8px}
.tt-total{margin-top:8px;color:var(--muted);font-size:12px}

/* hover effect */
.district-hover{stroke:#000 !important;stroke-width:2.5px !important}

/* Popular Vote + Seats layout */
.top-widgets{display:flex;gap:12px;align-items:stretch}
#popular-vote{flex:1}

.pv-header{display:flex;align-items:baseline;justify-content:space-between;margin-bottom:6px}
.pv-meta{display:flex;align-items:center;gap:8px}
.dot-sep{color:#bbb}

/* Row: side labels centered to combined stack height */
.pv-row{display:flex;align-items:center;gap:12px}
.pv-stack{flex:1 1 auto;display:flex;flex-direction:column;gap:10px}

.pv-side{display:flex;align-items:center;gap:6px;white-space:nowrap}
.pv-logo{width:50px;height:auto;display:block}
.pv-tag{font-weight:700;font-size:30px}

/* Popular vote bar */
.pv-wrap{position:relative;}
.pv-bar{
  position:relative; z-index: 1; height:44px;border-radius:8px;overflow:hidden;
  display:flex;align-items:stretch;background:#f0f2f7;
}
.pv-seg{
  display:flex;flex-direction:column;justify-content:center;align-items:center;
  font-weight:600;line-height:1.15;text-align:center;padding:4px 0;color:#fff;
}
.pv-seg.ndp{background:#f5c02c}  /* NDP declared color */
.pv-seg.ulp{background:#ed2633}  /* ULP declared color */

/* First line: % then swing badge on the right */
.pv-line{display:flex;align-items:center;gap:6px}
.pv-percent{font-size:13px;font-weight:700}
.pv-votes{font-size:11px;opacity:0.95}

/* Swing badge for visibility on red */
.pv-swing-badge{
  font-size:11px;font-weight:700;line-height:1;
  padding:4px 6px;border-radius:999px;
  background:rgba(255,255,255,0.95);
  border:1px solid currentColor;
  box-shadow:0 1px 2px rgba(0,0,0,0.15);
}
.pv-swing-badge.pos{color:#1a7f37}
.pv-swing-badge.neg{color:#8e1a1a}
.pv-swing-badge.zero{color:#666}

/* 50% caret and line above the bar */
.pv-50vline{
  position:absolute;left:50%;transform:translateX(-50%);
  top:-8px;height:8px;border-left:1px dotted rgba(0,0,0,0.5);  z-index: 2;
  pointer-events: none;
}
.pv-50caret{
  position:absolute;left:50%;transform:translateX(-50%);
  top:-16px;font-size:12px;color:#555;line-height:1  z-index: 4;              /* add */
  pointer-events: none;;
}
.pv-50label-top{
  position:absolute;left:50%;transform:translateX(-50%);
  top:-32px;font-size:12px;color:#666 z-index: 5;              /* add */
  pointer-events: none;;
}

/* Seats */
.seats-row{display:grid;grid-template-columns:repeat(15, 1fr);gap:6px}
.seat-square{
  width:100%;padding-top:100%;border-radius:4px;background:#d7d7d7;position:relative;
  box-shadow:0 1px 2px rgba(0,0,0,0.06) inset;
}
.seat-summary{margin-top:6px;color:var(--muted)}

/* Legend */
.legend-matrix{
  display:grid;
  grid-template-columns:auto 1fr 1fr;
  grid-auto-rows:auto;
  row-gap:8px;column-gap:10px;
  align-items:center;
}
.lm-blank{}
.lm-head{font-size:12px;color:var(--muted);transform:rotate(-12deg);transform-origin:left bottom}
.lm-declared{grid-column:2}
.lm-leading{grid-column:3}
.lm-row{display:contents}
.lm-name{grid-column:1}
.lm-swatch{width:18px;height:18px;border-radius:4px;justify-self:center}
.ulp-declared{background:#ed2633}
.ulp-leading{background:#f77e81}
.ndp-declared{background:#f5c02c}
.ndp-leading{background:#fedda6}

/* Right column */
.right{display:flex;flex-direction:column;gap:12px}
label{font-size:13px;color:var(--muted)}

/* Footer */
footer{margin-top:18px;color:#666;font-size:13px}

/* Responsive */
@media (max-width:980px){
  .layout{grid-template-columns:1fr}
  #svg-wrapper svg{width:90%}
  .pv-row{gap:8px}
  .pv-logo{width:18px}
}




