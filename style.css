:root{--bg:#fafafa;--panel:#fff;--muted:#777}
body{font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;background:var(--bg);margin:0;color:#111}
.wrap{max-width:1100px;margin:28px auto;padding:20px}
header{display:flex;gap:16px;align-items:center;justify-content:space-between}
h1{font-size:20px;margin:0}
.controls{display:none} /* no upload/reset controls */
.card{background:var(--panel);border-radius:12px;box-shadow:0 6px 20px rgba(15,15,20,0.06);padding:12px}
.layout{display:grid;grid-template-columns:1fr 420px;gap:16px;margin-top:18px}
#map-area{background:linear-gradient(180deg,#fff,#fbfdff);min-height:560px;border-radius:10px;padding:8px;display:flex;align-items:center;justify-content:center}
#svg-wrapper{width:100%;height:100%;overflow:hidden}
#svg-wrapper svg{width:100%;height:auto;display:block}
.muted{margin-top:6px;font-size:13px;color:var(--muted)}

/* tooltip */
.tooltip{
  position:fixed;
  pointer-events:none;
  background:#fff;
  border-radius:8px;
  padding:10px;
  border:1px solid rgba(0,0,0,0.08);
  box-shadow:0 6px 18px rgba(11,13,20,0.08);
  font-size:13px;
  width:380px; /* wider for 5 columns */
}
.district-name{font-weight:600;margin-bottom:6px}

/* 5-column tooltip table (Party | Candidate | Votes | Share | Swing) */
.tt-header, .tt-row{
  display:grid;
  grid-template-columns:88px 1fr 62px 62px 66px;
  align-items:center;
  gap:8px;
}
.tt-header{
  font-size:12px;
  color:var(--muted);
  padding-bottom:4px;
  border-bottom:1px solid rgba(0,0,0,0.06);
  margin-bottom:4px;
}
.tt-row{padding:4px 0}
.tt-col{min-width:0}

/* flipped alignment */
.party-cell, .candidate-cell{ text-align:right }
.votes-cell, .share-cell, .swing-cell{ text-align:left }
.tt-header .votes-cell,
.tt-header .share-cell,
.tt-header .swing-cell{ text-align:left }
.tt-header .party-cell,
.tt-header .candidate-cell{ text-align:right }

.party-cell{display:inline-flex;justify-content:flex-end;align-items:center;gap:6px;white-space:nowrap}
.party-chip{width:12px;height:12px;border-radius:3px;flex-shrink:0}
.candidate-cell .candidate-name{font-weight:600;font-size:13px;line-height:1}
.votes-cell, .share-cell, .swing-cell{font-size:13px}
.votes-cell, .share-cell{color:var(--muted)}
.swing-cell{font-weight:600}
.swing-pos{color:#1a7f37}
.swing-neg{color:#d03a3a}
.swing-zero{color:var(--muted)}
.tt-total{margin-top:8px;color:var(--muted);font-size:12px}

/* hover effect */
.district-hover{stroke:#000 !important;stroke-width:2.5px !important}

/* top widgets */
.top-widgets{display:flex;gap:12px;align-items:stretch}
#popular-vote{flex:1}

/* Popular vote stacked bar with 50% dotted line */
.pv-wrap{position:relative}
.pv-bar{
  position:relative;
  height:40px;
  border-radius:8px;
  overflow:hidden;
  display:flex;
  align-items:stretch;
  background:#f0f2f7;
}
.pv-seg{
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:13px;
  color:#fff;
  font-weight:600;
}
.pv-seg.ndp{background:#f5c02c}  /* NDP */
.pv-seg.ulp{background:#ed2633}  /* ULP */

/* dotted horizontal line at 50% height */
.pv-50line{
  position:absolute;
  left:0; right:0;
  top:50%;
  border-top:1px dotted rgba(0,0,0,0.35);
  pointer-events:none;
}
.pv-50label{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  top:calc(50% + 6px);
  font-size:12px;
  color:var(--muted);
}

/* Seats */
#seats{width:260px;height:120px}

/* right column */
.right{display:flex;flex-direction:column;gap:12px}
label{font-size:13px;color:var(--muted)}
.btn{display:none}
.small{font-size:12px;padding:6px 8px}

footer{margin-top:18px;color:#666;font-size:13px}

/* responsive */
@media (max-width
