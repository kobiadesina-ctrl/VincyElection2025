:root{--bg:#fafafa;--panel:#fff;--muted:#777}
body{font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;background:var(--bg);margin:0;color:#111}
.wrap{max-width:1100px;margin:28px auto;padding:20px}
header{display:flex;gap:16px;align-items:center;justify-content:space-between}
h1{font-size:20px;margin:0}
.card{background:var(--panel);border-radius:12px;box-shadow:0 6px 20px rgba(15,15,20,0.06);padding:12px}
.layout{display:grid;grid-template-columns:1fr 420px;gap:16px;margin-top:18px}
#map-area{background:linear-gradient(180deg,#fff,#fbfdff);min-height:560px;border-radius:10px;padding:8px;display:flex;align-items:center;justify-content:center}
#svg-wrapper{width:100%;height:100%;overflow:hidden}
#svg-wrapper svg{width:100%;height:auto;display:block}
.muted{margin-top:6px;font-size:13px;color:var(--muted)}
.dot-sep{margin:0 6px;color:var(--muted)}

/* Popular vote header layout */
.pv-card{padding:12px}
.pv-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.pv-title{font-weight:700}
.pv-bar-wrap{position:relative}
.pv-bar{display:flex;height:32px;border-radius:8px;overflow:hidden;background:#eee}
.pv-seg{display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px}
.pv-seg.ndp{background:#f5c02c}
.pv-seg.ulp{background:#ed2633;color:#fff}
.pv-50{position:absolute;left:50%;top:-8px;bottom:-8px;transform:translateX(-50%);pointer-events:none}
.pv-50-line{width:2px;height:100%;background:#333;opacity:.3;margin:0 auto}
.pv-50-caret{text-align:center;margin-top:-2px;font-size:12px}

/* Seats row */
.seats-wrap{display:flex;flex-direction:column;gap:8px}
.seats-header{display:flex;align-items:center;justify-content:space-between}
.seats-title{font-weight:700}
.seats-legend{display:flex;gap:8px;font-size:12px;color:#555}
.seat-key{display:inline-flex;align-items:center;gap:6px;padding:2px 8px;border-radius:999px;background:#f1f1f1}
.seat-key.ndp::before{content:"";width:12px;height:12px;border-radius:3px;background:#f5c02c}
.seat-key.ulp::before{content:"";width:12px;height:12px;border-radius:3px;background:#ed2633}
.seats-row{display:grid;grid-template-columns:repeat(15,1fr);gap:6px}
.seat{height:26px;border-radius:6px;background:#ddd;position:relative;overflow:hidden}
.seat.tip::after{content:attr(data-tip);position:absolute;inset:auto 0 0 0;background:rgba(0,0,0,.6);color:#fff;font-size:10px;padding:2px 4px;text-align:center}

/* Legend matrix */
.legend-matrix{display:grid;grid-template-columns:1fr 80px 80px;gap:8px;align-items:center}
.lm-blank{}
.lm-head{font-weight:700;color:#444;text-align:center}
.lm-declared{}
.lm-leading{}
.lm-row{display:contents}
.lm-name{font-weight:600}
.lm-swatch{height:22px;border-radius:6px}
.ulp-declared{background:#ed2633}
.ulp-leading{background:#f77e81}
.ndp-declared{background:#f5c02c}
.ndp-leading{background:#fedda6}

/* Tooltip */
.tooltip{position:fixed;z-index:50;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.12);padding:12px;width:min(420px,45vw)}
.tooltip .district-name{font-weight:800;margin-bottom:8px}
.tt-header,.tt-row{display:grid;grid-template-columns:112px 1fr 94px 72px 72px;align-items:center;gap:6px}
.tt-header{font-size:12px;color:#666;margin-bottom:4px}
.tt-row{padding:6px;border-radius:8px}
.tt-row + .tt-row{margin-top:6px}
.tt-row .tt-col{font-size:14px}
.tt-row .party-cell{font-weight:700}
.tt-row .votes-cell,.tt-row .share-cell,.tt-row .swing-cell{text-align:right;font-variant-numeric:tabular-nums}
.tt-row--declared{background:#f3f7ff} /* filled with leading tint in JS */
.tt-total{margin-top:8px;font-size:13px;color:#555}
.swing-plus{color:#0a7c2d;font-weight:700}
.swing-minus{color:#b00020;font-weight:700}

/* Declared icon */
.decl-icon{display:inline-block;width:16px;height:16px;margin-left:6px;vertical-align:-3px;background:url('Declaration.svg') center/contain no-repeat}

/* Declared row emphasis */
.tt-row--declared .tt-col{font-weight:700} /* all values bold */
.tt-row--declared .candidate-name{font-weight:700}

/* Map hover outline */
.district-hover{stroke:#000 !important;stroke-width:2.5px !important}

/* Party summary table */
.party-table-card{margin-top:12px}
.party-table{width:100%;border-collapse:separate;border-spacing:0 6px;font-size:14px}
.party-table thead th{font-weight:600;color:#444;text-align:center}
.party-table thead .pt-party-col{text-align:left}
.party-table .pt-subhead th{font-weight:500;color:var(--muted);border-bottom:1px solid #eee;padding-bottom:6px}
.party-table tbody tr{background:#fafafa}
.party-table tbody tr .pt-cell{padding:8px 10px;vertical-align:middle}
.party-table .pt-party{display:flex;align-items:center;gap:10px;font-weight:600}
.party-table .pt-party img{width:22px;height:22px;object-fit:contain;display:block}
.party-table .pt-seats, .party-table .pt-pv, .party-table .pt-pct{text-align:right;font-variant-numeric:tabular-nums}
.party-table .pt-total{opacity:.9}
.party-table tbody tr:nth-child(1){background:#fff5f6} /* ULP row tint */
.party-table tbody tr:nth-child(2){background:#fffaf0} /* NDP row tint */

@media (max-width:980px){
  .layout{grid-template-columns:1fr}
  .pv-wrap,.seats-wrap{max-width:100%}
  .tooltip{width:min(90vw,380px)}
  .party-table{font-size:13px}
  .party-table .pt-party img{width:18px;height:18px}
}
